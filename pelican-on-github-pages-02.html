<!DOCTYPE html>
<html lang="kr">
<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-161F11456P"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-161F11456P');
  </script>
  <meta charset="utf-8">
  <title>PlayEng Ground</title>
	<meta name="description" content="Title: Pelican on Github Pages 02; Date: 2023-06-08;">
	<meta name="author" content="pandavas89">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://blog.tykl.me/theme/css/ipython.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link href="https://blog.tykl.me/theme/css/local.css" rel="stylesheet">
	<link href="https://blog.tykl.me/theme/css/pygments.css" rel="stylesheet">
  <style>
    @font-face {
      font-family: "NanumGothic";
      src: url("https://blog.tykl.me/theme/fonts/NanumGothic.ttf");
    }
  </style>
</head>
<body style="font-family: NanumGothic;">
<div class="container">
  <!-- 상단 header -->
  <header class="d-flex flex-wrap justify-content-between py-3 mb-4 border-bottom align-items-baseline">
    <a href="https://blog.tykl.me" class="d-flex align-items-center mb-3 mb-md-0 link-body-emphasis text-decoration-none">
      <img src="https://cdn-icons-png.flaticon.com/128/5326/5326305.png" width="32" height="32" class="me-4"></img>
      <span class="fs-1 ml-2">PlayEng Ground</span>
    </a>
    <ul class="nav nav-pills nav-justified fs-2 algin-items-baseline">
      <li class="nav-item mx-2">
        <a href="https://blog.tykl.me" class="nav-link p-3 active" aria-current="page">Home</a>
      </li>
      <li class="nav-item mx-2">
        <a href="#" class="nav-link p-3" aria-current="page">About</a>
      </li>
      <li class="nav-item dropdown mx-2">
        <a class="nav-link dropdown-toggle p-3" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">Categories</a>
        <ul class="dropdown-menu fs-2 py-3">
          <li><a class="dropdown-item py-3" href="https://blog.tykl.me/category/python.html">python</a></li>
        </ul>
      </li>
      <li class="nav-item mx-2">
        <a href="https://blog.tykl.me/archive.html" class="nav-link p-3" aria-current="page">Archive</a>
      </li>
    </ul>
  </header>
  <!-- content row -->
  <div class="row">
    <div class="col-lg-12">
<div class="d-flex flex-row">
	<div class="col-xl-4">
		<div id="sticky-toc" class="sticky">
			<div class="sticky">
				Series
				<ul>
				</ul>
			</div>

			Contents
			<div id="toc"><ul><li><a class="toc-href" href="#" title="Pelican on Github Pages 02">Pelican on Github Pages 02</a><ul><li><a class="toc-href" href="#github action giban baepo jadonghwahagi" title="Github Action 기반 배포 자동화하기">Github Action 기반 배포 자동화하기</a></li></ul></li></ul></div>
		</div>
	</div>
	<div class="article col-xl-8" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="article-header mb-3 bg-light p-3">
			<h1 itemprop="name headline">
Pelican on Github Pages 02</h1>
			<h3>Github Action 기반 배포 자동화하기</h3>
			<div class="d-flex justify-content-between">
				<time datetime="2023-06-08T18:00:00+09:00" itemprop="datePublished">2023/06/08</time>
				<div class="d-flex justify-content-end">
					<span itemprop="articleSection" class="px-1">
						<a href="https://blog.tykl.me/category/programming.html" rel="category" class="badge bg-danger text-decoration-none">programming</a>
					</span>
 
					<span itemprop="keywords" class="px-1">
						<a href="https://blog.tykl.me/tag/pelican.html" rel="tag" class="badge bg-primary text-decoration-none">Pelican</a>
					</span>
					<span itemprop="keywords" class="px-1">
						<a href="https://blog.tykl.me/tag/github.html" rel="tag" class="badge bg-primary text-decoration-none">Github</a>
					</span>
					<span itemprop="keywords" class="px-1">
						<a href="https://blog.tykl.me/tag/github-action.html" rel="tag" class="badge bg-primary text-decoration-none">Github Action</a>
					</span>
				</div>
			</div>
		</div>
		<div itemprop="articleBody" class="article-body"><p><a href="/pelican-on-github-pages-01">앞선 글</a>에서, <code>Pelican</code>으로 정적 사이트를 생성하고 배포하는 방법을 알아보았습니다. 이제, <code>Pelican</code> 프로젝트를 푸시하면 자동으로 <code>Github Pages</code>가 업데이트 되도록 해 보겠습니다.</p>
<h1 id="github action giban baepo jadonghwahagi">Github Action 기반 배포 자동화하기</h1>
<ol>
<li>리포지토리 루트 폴더에 <code>.github/workflows</code>를 생성해 줍니다.</li>
<li><code>pelican_github_pages_deloy.yml</code> 파일을 생성하고 다음과 같이 입력합니다
  ```
  name: build and deploy pelican outputs</li>
</ol>
<p>permissions:
    contents: write</p>
<p>on:
    push:
      branches:["main"]</p>
<p>jobs:
    build:
      runs-on: ubuntu-latest</p>
<div class="hightlight"><pre><span></span><code><span class="w">  </span><span class="nl">steps</span><span class="p">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">uses</span><span class="o">:</span><span class="w"> </span><span class="n">actions</span><span class="o">/</span><span class="n">checkout</span><span class="p">@</span><span class="n">v3</span>

<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">run</span><span class="o">:</span><span class="w"> </span><span class="n">pip</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">pelican</span><span class="w"> </span><span class="n">markdown</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">run</span><span class="o">:</span><span class="w"> </span><span class="n">pelican</span><span class="w"> </span><span class="n">content</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">run</span><span class="o">:</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s">"[Custom URL]"</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">output</span><span class="o">/</span><span class="n">CNAME</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">run</span><span class="o">:</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s">""</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">output</span><span class="o">/</span><span class="p">.</span><span class="n">nojekyll</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">run</span><span class="o">:</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="n">github</span><span class="o">-</span><span class="n">actions</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">run</span><span class="o">:</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="n">email</span><span class="w"> </span><span class="n">github</span><span class="o">-</span><span class="n">actions</span><span class="p">@</span><span class="n">github</span><span class="p">.</span><span class="n">com</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">run</span><span class="o">:</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">--</span><span class="n">work</span><span class="o">-</span><span class="n">tree</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">--</span><span class="n">all</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="s">"Automatic deployment by github-actions"</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">run</span><span class="o">:</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">push</span><span class="w"> </span><span class="n">origin</span><span class="w"> </span><span class="n">HEAD</span><span class="o">:</span><span class="n">gh_pages</span><span class="w"> </span><span class="o">--</span><span class="n">force</span>
</code></pre></div>
<p>```</p>
<ol>
<li>로컬 리포지토리(<code>Pelican</code> 프로젝트) 내의 파일들을 <code>Github Pages</code>의 <code>main</code> 브랜치에 푸시합니다.</li>
<li><code>Github Action</code>을 설정해 주었기 때문에, Push의 결과로 Github Action이 작동합니다. 리포지토리의 Action 탭에서 확인할 수 있습니다.</li>
</ol>
<p>이로써 프로젝트 푸시에 따라 자동적으로 Github Pages가 업데이트되도록 설정했습니다다.</p></div>
		<hr>
		<h2>Comments</h2>
		<script src="https://utteranc.es/client.js"
    	repo="pandavas89/pandavas89.github.io"
      issue-term="pathname"
      theme="github-light"
      crossorigin="anonymous"
      async>
		</script>
	</div>
</div>
    </div>
  </div>
</div>
<script src="	https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>